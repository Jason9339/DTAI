# 項目結構說明

## 📁 文件結構

```
DTAI/
├── app.py                    # 主應用程式入口（模組化版本）
├── main.py                   # 主應用程式（導航式UI版本）
├── main_old.py              # 舊版單文件應用（備份）
├── config.py                 # 配置文件（常量、資料庫、問卷）
├── utils.py                  # 工具函數（AI 客戶端初始化）
├── food_recognition.py       # 食物辨識模組
├── constitution_analysis.py  # 體質分析模組
├── health_advice.py         # 養生建議生成模組
├── food_database.csv        # 食物資料庫（CSV格式）
├── test_system.py           # 系統測試腳本
├── requirements.txt         # 依賴包列表
├── README.md               # 項目說明文件
└── PROJECT_STRUCTURE.md    # 本文件
```

## 🎯 核心模組說明

### `app.py` - 主應用程式（模組化版本）
- 使用模組化設計，導入各功能模組
- 採用主頁面導航UI，無頂部標籤欄
- 支援進度追蹤和狀態管理
- 美觀的按鈕設計和響應式布局

### `main.py` - 主應用程式（導航式UI版本）
- 與app.py功能相同，但使用不同的實現方式
- 同樣採用主頁面導航設計
- 可作為app.py的替代版本

### `main_old.py` - 舊版應用（備份）
- 原始的單文件應用程式
- 使用頂部標籤欄設計
- 保留作為參考和備份

### `config.py` - 配置文件
- 中醫食物屬性資料庫載入函數 (`load_food_database_from_csv()`)
- 體質類型定義 (`CONSTITUTION_TYPES`)
- 20題體質問卷 (`CONSTITUTION_QUESTIONS`)

### `food_database.csv` - 食物資料庫
- CSV格式：`English,Chinese,FiveNature`
- 範例：`apple,蘋果,平性`
- 支援自定義擴展，系統會自動根據五性屬性配置歸經和功效

### `test_system.py` - 系統測試腳本
- 測試各模組是否正常載入
- 驗證食物辨識、體質分析、養生建議功能
- 檢查 API 配置狀態

### `utils.py` - 工具函數
- AI 客戶端初始化 (`get_ai_client()`)
- 支援 aisuite + Groq API 整合

### `food_recognition.py` - 食物辨識模組
- 食物圖片辨識功能（目前為模擬實現）
- 返回食物名稱、五性屬性、信心度
- 預留深度學習模型接口

### `constitution_analysis.py` - 體質分析模組
- 20題問卷處理邏輯
- AI 驅動的體質分析（使用 Groq Llama-3.3-70B）
- 支援混合體質分析

### `health_advice.py` - 養生建議生成模組
- 結合體質分析和食物辨識結果
- AI 生成個人化養生建議
- 包含飲食、生活作息、運動等建議

## 🎨 UI 設計特色

### 主頁面導航
- **設計理念**：清晰的流程指引，避免標籤欄混亂
- **三步驟流程**：
  1. 🏥 體質分析（第一步）
  2. 🍎 食物辨識（第二步）  
  3. 🌿 養生建議（第三步）

### 視覺元素
- **按鈕設計**：大型按鈕（120px高度），清晰的圖標
- **進度指示**：實時顯示完成狀態
- **色彩搭配**：漸層背景，現代化設計
- **響應式布局**：適配不同螢幕尺寸

### 用戶體驗
- **狀態管理**：全局狀態追蹤，數據在頁面間共享
- **進度追蹤**：主頁面顯示當前完成進度
- **靈活使用**：支援任意順序使用各功能
- **返回導航**：每個頁面都有返回主頁按鈕

## 🔧 技術架構

### 前端技術
- **框架**：Gradio 4.0+
- **狀態管理**：gr.State() 全局狀態
- **頁面切換**：gr.update() 動態顯示/隱藏
- **CSS 自定義**：自定義樣式提升視覺效果

### 後端技術
- **AI 整合**：aisuite + Groq API
- **模型**：Llama-3.3-70B-versatile
- **資料處理**：CSV 讀取，JSON 格式化
- **錯誤處理**：完善的異常捕獲機制

### 部署方式
- **本地運行**：`python3 app.py` 或 `python3 main.py`
- **分享功能**：Gradio `share=True` 自動生成公開連結
- **環境配置**：支援 `.env` 文件和環境變數

## 🚀 使用建議

### 開發者
- 使用 `app.py` 進行功能開發和測試
- 使用 `test_system.py` 驗證系統狀態
- 參考 `main_old.py` 了解原始實現

### 用戶
- 建議按順序完成：體質分析 → 食物辨識 → 養生建議
- 首次使用需要設置 Groq API Key
- 可以獨立使用任何單一功能

### 部署
- 確保安裝所有依賴：`pip install -r requirements.txt`
- 設置環境變數：`export GROQ_API_KEY=your_key`
- 運行應用：`python3 app.py`

## 📈 未來擴展

### 功能增強
- [ ] 整合真實的深度學習食物辨識模型
- [ ] 擴充食物資料庫規模
- [ ] 增加更多體質評估維度
- [ ] 支援歷史記錄和用戶檔案

### UI/UX 改進
- [ ] 添加動畫效果
- [ ] 支援深色模式
- [ ] 移動端優化
- [ ] 多語言支援

### 技術升級
- [ ] 資料庫持久化
- [ ] 用戶認證系統
- [ ] API 接口開發
- [ ] 容器化部署 